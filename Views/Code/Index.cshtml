@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

<form id="codeForm" asp-action="CheckTestcases" method="get">
    <label for="code">Enter C# Code:</label><br />
    <textarea id="code" name="code" rows="10" cols="50"></textarea>

    <button type="button" onclick="runCode()">Run Code</button>
</form>

<div id="editor">
    function foo(items) {
    var x = "All this is syntax highlighted";
    return x;
    }
</div>

<script src="/ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.session.setMode("ace/mode/javascript");
</script>

<div id="results"></div>

<script>
    function runCode() {
        const code = document.getElementById("code").value;

        fetch('/Code', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ code: code })
        })
        .then(response => {
                response.json()
                console.log("Response: " + response.json())
        })
        .then(result => {
            console.log("Result: " + result)
            document.getElementById("results").innerHTML = result;
        });
    }
</script>

